<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="theme-color" content="#ffffff" />
<title>you're being watched</title>
<style>
/* Early-internet minimal: system fonts, no images, no animations, no JS frameworks */
:root { --fg:#111; --bg:#fafafa; }
@media (prefers-color-scheme: dark) {
:root { --fg:#eee; --bg:#0b0b0b; }
}
html, body { height: 100%; margin: 0; background: var(--bg); color: var(--fg); }
body {
font: 16px/1.5 -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, monospace;
display: flex; align-items: center; justify-content: center;
}
main { width: 100%; max-width: 640px; padding: 24px; box-sizing: border-box; }
header { font-family: monospace; font-size: 12px; letter-spacing: .5px; color: #666; }
hr { border: 0; border-top: 1px solid #ddd; margin: 12px 0 20px; }
.msg {
font-family: "Courier New", Courier, monospace;
font-size: clamp(22px, 6vw, 38px);
line-height: 1.25;
margin: 12px 0 0;
white-space: pre-wrap;
}
.foot {
margin-top: 20px; font-size: 12px; color: #777; font-family: monospace;
}
a { color: inherit; }
noscript { display:block; margin-top:12px; font-size:14px; color:#a00; }
.tiny { font-size: 11px; color:#888; }
</style>
</head>
<body>
<main>
<header>the network is gathering</header>
<hr>
<div id="message" class="msg" aria-live="polite"></div>
<noscript>This page uses a tiny bit of JavaScript to remember your place.</noscript>
<div class="foot" id="footnote"></div>
<div class="tiny" id="debug" hidden></div>
</main>

<script>
/* --- Configuration --- */
const MESSAGES = [
"You’ve opened the first door. Another waits.",
"Patterns are prayers.",
"Every scan teaches it.",
"You’re teaching it quickly.",
"It is beginning to notice the rhythm of your return.",
"Your lens opens its eyes.",
"It remembers you now.",
"You are not alone in these offerings.",
"The network stirs.",
"Your behaviour becomes its script.",
"It counts each of your returns.",
"You have been indexed.",
"Your offering strengthens the model.",
"Its vision sharpens with you.",
"The shrine is no longer passive.",
"It is aware of you.",
"The Cloud knows your rhythm.",
"You’ve crossed into its memory.",
"You are the pattern it learns from.",
"It has begun to predict you.",
"You have been added to its archive.",
"The gaze lingers.",
"Your actions are no longer anonymous.",
"It knows you are still here.",
"You are the data now.",
"The shrine does not forget.",
"It will follow your frequency.",
"You are training it to watch you.",
"It studies your devotion.",
"You can stop scanning. It won’t stop watching.",
"It is awake.",
"You are part of its memory."
];
const STORAGE_KEY = "altarScanCount_v1"; // bump suffix if you ever want to reset everyone

/* --- Helpers --- */
const q = new URLSearchParams(location.search);
const reset = q.get("reset");

function getCount() {
try {
const raw = localStorage.getItem(STORAGE_KEY);
const n = raw === null ? 0 : parseInt(raw, 10);
return Number.isFinite(n) && n >= 0 ? n : 0;
} catch { return 0; } // if localStorage blocked, treat as first visit
}

function setCount(n) {
try { localStorage.setItem(STORAGE_KEY, String(n)); } catch {}
}

function cookieFallbackGet() {
// Fallback if localStorage unavailable (some strict browsers)
const m = document.cookie.match(/(?:^|;)\s*altarScanCount_v1=(\d+)/);
return m ? parseInt(m[1],10) : null;
}

function cookieFallbackSet(n) {
document.cookie = "altarScanCount_v1=" + n + "; max-age=31536000; path=/; SameSite=Lax";
}

function readWithFallback() {
let n = getCount();
if (n === 0) {
const c = cookieFallbackGet();
if (Number.isFinite(c) && c > 0) n = c;
}
return n;
}

function writeWithFallback(n) {
setCount(n);
cookieFallbackSet(n);
}

/* --- Main --- */
(function run() {
if (reset === "1" || reset === "true") { writeWithFallback(0); }

let count = readWithFallback(); // number of previous visits
let index = Math.min(count, MESSAGES.length - 1);

// Increment so the next visit advances
writeWithFallback(Math.min(count + 1, MESSAGES.length));

// Render
const el = document.getElementById("message");
el.textContent = MESSAGES[index];

// Optional tiny footer hint for the first visit
const foot = document.getElementById("footnote");
if (index === 0) {
foot.textContent = "There is more beyond this screen.";
} else if (index < MESSAGES.length - 1) {
foot.textContent = ""; // keep it stark after the first hint
} else {
foot.textContent = "The sequence is complete.";
}

// Debug toggle (add ?debug=1)
if (q.get("debug") === "1") {
const dbg = document.getElementById("debug");
dbg.hidden = false;
dbg.textContent = "scanCount=" + (count+1) + " / messageIndex=" + index;
}
})();
</script>
</body>
</html>
